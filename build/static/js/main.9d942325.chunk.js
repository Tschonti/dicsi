(this["webpackJsonpdicsi-react"]=this["webpackJsonpdicsi-react"]||[]).push([[0],{369:function(e,t,n){"use strict";n.r(t);var s=n(0),a=n.n(s),r=n(37),i=n.n(r),c=n(13),o=n(20),l=n(201),d=n(159),u=(n(228),n(406)),p=n(90),j=n(6),b=n(40),h=n.n(b),f="FETCH_SONGS",m="UPDATE_WITH_WRONG_ID",y="UPDATE_WITH_ID",g="UPDATE_WITH_TERM",O="CANCEL_SEARCH",v="FETCH_SONG",x="CREATE_SONG",k="EDIT_SONG",N="DELETE_SONG",S="NEW_ALERT",z="REMOVE_ALERT",w="ADD_TO_PLAYLIST",C="REMOVE_FROM_PLAYLIST",I="PLAYLIST_NEXT",A="PLAYLIST_STEP",L="START_PLAYLIST",T="STOP_PLAYLIST",P="CLEAR_PLAYLIST",M="TOGGLE_VISIBILITY",E="MOVE_IN_PLAYLIST",V="SAVE_PLAYLIST",_="FETCH_PLAYLISTS",D="LOAD_PLAYLIST",B="UNLOAD_PLAYLIST",F="DELETE_PLAYLIST",R="REPLACE_PLAYLIST",Y="REPLACE_PLAYLIST_IN_LIST",G="OPEN_MODAL",K="CLOSE_MODAL",H="LOGIN",U="LOGOUT",W="RECOVER_STATE",J=n(48),X=function(e,t){e.response?401===e.response.status||403===e.response.status?t({type:S,payload:{msg:"Nem vagy bejelentkezve",type:"error"}}):400===e.response.status?t({type:S,payload:{msg:"Hib\xe1s felhaszn\xe1l\xf3n\xe9v vagy jelsz\xf3",type:"error"}}):(t({type:S,payload:{msg:"".concat(e.response.status,": ").concat(e.response.statusText),type:"error"}}),console.error(e.response)):(t({type:S,payload:{msg:"Valami baj van",type:"error"}}),console.error(e)),function(e){setTimeout((function(){return e({type:z})}),5e3)}(t)},q=function(e,t){e.sort((function(e,n){return e[t]<n[t]?-1:e[t]>n[t]?1:0}))},Q=function(e,t){return Object(j.a)(Object(j.a)({},e),{},{songs:[].concat(Object(J.a)(e.songs),[t])})},Z=function(e,t){var n=e.songs.indexOf(t);if(-1===n)return e;var s=e.currentIndex;(n<s||n===e.songs.length-1)&&s>0&&(s-=1);var a=Object(J.a)(e.songs);return a.splice(n,1),Object(j.a)(Object(j.a)({},e),{},{songs:a,currentIndex:s})},$=function(e,t){return Object(j.a)(Object(j.a)({},e),{},{songs:e.songs.filter((function(e){return e!==t}))})},ee=function(e,t,n){if(0===n&&t||n===e.songs.length-1&&!t)return e;var s=t?n-1:n+1,a=Object(j.a)({},e),r=a.songs[s];a.songs[s]=a.songs[n],a.songs[n]=r;var i=0;return e.currentIndex===n?i=t?-1:1:e.currentIndex===s&&(i=t?1:-1),a.currentIndex+=i,a},te=function(e,t,n){if(0===n&&t||n===e.songs.length-1&&!t)return e;var s=t?n-1:n+1,a=Object(j.a)({},e),r=a.songs[s];return a.songs[s]=a.songs[n],a.songs[n]=r,a},ne=function(e){return e.map((function(e,t){return{song:e,place:t}}))},se=function(e){return e.sort((function(e,t){return e.place-t.place})).map((function(e){return e.song}))},ae="",re="https://dicsi.okgy.hu",ie={songs:[],currentIndex:0,active:!1,visible:!1,loaded:void 0,loadedName:""},ce={list:[],validSearch:!1},oe={signedIn:!1,token:null},le={open:!1,id:void 0},de=Object(o.c)({songs:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f:return Object(j.a)({},h.a.mapKeys(t.payload,"id"));case v:case x:case k:return Object(j.a)(Object(j.a)({},e),{},Object(p.a)({},t.payload.id,t.payload));case N:return h.a.omit(e,t.payload);default:return e}},searchList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ce,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case y:return{list:[t.payload.id],validSearch:!0};case m:return{list:[],validSearch:!0};case g:return{list:h.a.uniq(t.payload.map((function(e){return e.id}))),validSearch:!0};case O:return ce;default:return e}},alert:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case S:return t.payload;case z:return{};default:return e}},form:u.a,playlist:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ie,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case w:return Q(e,t.payload);case C:return Z(e,t.payload);case I:return Object(j.a)(Object(j.a)({},e),{},{currentIndex:t.payload});case L:return Object(j.a)(Object(j.a)({},e),{},{active:!0});case T:return Object(j.a)(Object(j.a)({},e),{},{active:!1});case P:return Object(j.a)(Object(j.a)({},ie),{},{visible:e.visible});case M:return Object(j.a)(Object(j.a)({},e),{},{visible:!e.visible});case E:return ee(e,t.payload.up,t.payload.index);case V:return Object(j.a)(Object(j.a)({},e),{},{songs:t.payload.songs,loaded:t.payload.id,loadedName:t.payload.name});case D:return{songs:t.payload.list.songs,currentIndex:0,active:!1,visible:!0,loaded:t.payload.modifiable?t.payload.list.id:void 0,loadedName:t.payload.modifiable?t.payload.list.name:""};case B:return Object(j.a)(Object(j.a)({},ie),{},{visible:!0});case R:return t.payload;case A:return Object(j.a)(Object(j.a)({},e),{},{currentIndex:t.payload});case W:return e.list&&!e.songs?Object(j.a)(Object(j.a)({},e),{},{songs:e.list}):e;default:return e}},modal:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:le,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case G:return{open:!0,id:t.payload};case K:return le;default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case H:return{signedIn:!0,token:t.payload};case U:return oe;default:return e}},playlistList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{list:[],loaded:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _:return{list:t.payload,loaded:!0};case R:case Y:var n=e.list.map((function(e){return e.id})),s=n.indexOf(t.payload.loaded);if(-1===s)return e;var a=Object(j.a)({},e);return a.list[s].songs=t.payload.songs,a;case F:return Object(j.a)(Object(j.a)({},e),{},{list:e.list.filter((function(e){return e.id!==t.payload}))});case N:return Object(j.a)(Object(j.a)({},e),{},{list:e.list.map((function(e){return Object(j.a)(Object(j.a)({},e),{},{songs:e.songs.filter((function(e){return e!==t.payload}))})}))});case V:return Object(j.a)(Object(j.a)({},e),{},{list:[].concat(Object(J.a)(e.list),[t.payload])});default:return e}}}),ue=n(29),pe=n(30),je=n(33),be=n(31),he=n(17),fe=n(405),me=n(22),ye=n(19),ge=(n(78),n(203)),Oe=n(1),ve=function(){return me.isMobile?null:Object(Oe.jsx)(ge.a,{effect:"solid"})},xe=function(e){return Object(s.useEffect)((function(){window.scrollTo(0,0)}),[e.path]),e.children},ke=n(204),Ne=n.n(ke),Se=function(){return Object(Oe.jsxs)("div",{className:"loader-container",children:[Object(Oe.jsx)(Ne.a,{type:"Oval",color:"#999897",visible:!0}),Object(Oe.jsx)("p",{className:"big-text",children:"Bet\xf6lt\xe9s..."})]})},ze=n(93),we=function(e){var t=Object(s.useState)(""),n=Object(ze.a)(t,2),a=n[0],r=n[1],i=Object(s.useState)(""),c=Object(ze.a)(i,2),o=c[0],l=c[1],d=Object(s.useState)(!1),u=Object(ze.a)(d,2),p=u[0],j=u[1];return Object(s.useEffect)((function(){var e=setTimeout((function(){l(a)}),350);return function(){clearTimeout(e)}}),[a]),Object(s.useEffect)((function(){o?isNaN(o)?e.term(o,p):e.id(o):e.cancel()}),[o]),Object(s.useEffect)((function(){a&&isNaN(a)&&e.term(a,p)}),[p]),Object(Oe.jsx)("div",{className:"ui form",children:Object(Oe.jsxs)("div",{className:"inline fields centered-container",children:[Object(Oe.jsxs)("div",{className:"thirteen wide field",children:[Object(Oe.jsx)("label",{children:"Keres\xe9s"}),Object(Oe.jsx)("input",{value:a,onChange:function(e){return r(e.target.value)},placeholder:"Sorsz\xe1m vagy szavak, \xe9kezetek n\xe9lk\xfcl"})]}),Object(Oe.jsx)("div",{className:"three wide field",children:Object(Oe.jsxs)("div",{className:"ui checkbox my-check",children:[Object(Oe.jsx)("input",{id:"lyricsCheckbox",type:"checkbox",tabIndex:"0",checked:p,onChange:function(){return j(!p)}}),Object(Oe.jsx)("label",{htmlFor:"lyricsCheckbox",children:"dalsz\xf6vegben is"})]})})]})})},Ce=function(e){var t=e.icons.map((function(e,t){return Object(Oe.jsx)("i",{className:"icon ".concat(e)},t)}));return Object(Oe.jsxs)("button",{"data-tip":e.tip,"aria-label":e.tip,className:"ui button my-button icon ".concat(e.color),onClick:function(t){t.stopPropagation(),e.onClick()},disabled:e.disabled,children:[t,e.text]})},Ie=n(12),Ae=n.n(Ie),Le=n(23),Te=n(205),Pe=n.n(Te).a.create({baseURL:"https://api.dicsi.okgy.hu/"}),Me=n(35),Ee=Object(Me.a)(),Ve=function(){return function(){var e=Object(Le.a)(Ae.a.mark((function e(t){var n;return Ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Pe.get("/songs/?format=json");case 3:n=e.sent,t({type:f,payload:n.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),X(e.t0,t);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},_e=function(e){return function(){var t=Object(Le.a)(Ae.a.mark((function t(n){var s;return Ae.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Pe.get("/songs/".concat(e,"/?format=json"));case 3:s=t.sent,n({type:v,payload:s.data}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),X(t.t0,n);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},De=function(){var e=Object(Le.a)(Ae.a.mark((function e(t,n,s,a){var r;return Ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Pe.patch("/playlists/".concat(a,"/"),{songs:ne(s.songs)},{headers:{Authorization:"Token ".concat(n().auth.token)}});case 3:r=e.sent,n().playlist.loaded===a?t({type:R,payload:Object(j.a)(Object(j.a)({},s),{},{songs:se(r.data.songs)})}):t({type:Y,payload:{loaded:a,songs:se(r.data.songs)}}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),X(e.t0,t);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,s,a){return e.apply(this,arguments)}}(),Be=function(e){return function(){var t=Object(Le.a)(Ae.a.mark((function t(n,s){var a;return Ae.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!s().playlist.songs.includes(e)){t.next=4;break}n({type:S,payload:{msg:"Ez a dal m\xe1r fent van a lej\xe1tsz\xe1si list\xe1n",type:"error"}}),t.next=11;break;case 4:if(s().playlist.loaded){t.next=8;break}n({type:w,payload:e}),t.next=11;break;case 8:return a=Q(s().playlist,e),t.next=11,De(n,s,a,s().playlist.loaded);case 11:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},Fe=function(e,t){return function(){var n=Object(Le.a)(Ae.a.mark((function n(s,a){var r,i;return Ae.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a().playlist.loaded||t){n.next=4;break}s({type:C,payload:e}),n.next=8;break;case 4:return r="",a().playlist.loaded===t?r=Z(a().playlist,e):(i=a().playlistList.list.find((function(e){return e.id===t})),r=$(i,e)),n.next=8,De(s,a,r,t);case 8:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()},Re=function(e,t){if(t.active)return e?t.currentIndex===t.songs.length-1?(Ee.push("".concat(ae,"/songs/").concat(t.songs[0])),{type:I,payload:0}):(Ee.push("".concat(ae,"/songs/").concat(t.songs[t.currentIndex+1])),{type:I,payload:t.currentIndex+1}):t.currentIndex<1?(Ee.push("".concat(ae,"/songs/").concat(t.songs[t.songs.length-1])),{type:I,payload:t.songs.length-1}):(Ee.push("".concat(ae,"/songs/").concat(t.songs[t.currentIndex-1])),{type:I,payload:t.currentIndex-1})},Ye=function(){return{type:T}},Ge=function(e){return function(){var t=Object(Le.a)(Ae.a.mark((function t(n,s){return Ae.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s().playlist.loaded||e){t.next=5;break}n({type:P}),n({type:K}),t.next=16;break;case 5:return t.prev=5,t.next=8,Pe.delete("/playlists/".concat(e,"/"),{headers:{Authorization:"Token ".concat(s().auth.token)}});case 8:e===s().playlist.loaded&&n({type:P}),n({type:F,payload:e}),n({type:K}),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(5),X(t.t0,n);case 16:case"end":return t.stop()}}),t,null,[[5,13]])})));return function(e,n){return t.apply(this,arguments)}}()},Ke=function(){return{type:M}},He=function(e,t,n){return function(){var s=Object(Le.a)(Ae.a.mark((function s(a,r){var i,c;return Ae.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(r().playlist.loaded||n){s.next=4;break}a({type:E,payload:{index:e,up:t}}),s.next=8;break;case 4:return i="",r().playlist.loaded===n?i=ee(r().playlist,t,e):(c=r().playlistList.list.find((function(e){return e.id===n})),i=te(c,t,e)),s.next=8,De(a,r,i,n);case 8:case"end":return s.stop()}}),s)})));return function(e,t){return s.apply(this,arguments)}}()},Ue=function(e,t){return function(){var n=Object(Le.a)(Ae.a.mark((function n(s){var a;return Ae.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Pe.get("/playlists/".concat(e,"?format=json"));case 3:a=n.sent,s({type:D,payload:{list:Object(j.a)(Object(j.a)({},a.data),{},{songs:se(a.data.songs)}),modifiable:t}}),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),X(n.t0,s);case 10:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(e){return n.apply(this,arguments)}}()},We=function(e,t){return{type:S,payload:{msg:e,type:t}}},Je=function(){return{type:z}},Xe=function(e){Object(je.a)(n,e);var t=Object(be.a)(n);function n(){var e;Object(ue.a)(this,n);for(var s=arguments.length,a=new Array(s),r=0;r<s;r++)a[r]=arguments[r];return(e=t.call.apply(t,[this].concat(a))).state={loaded:!1,sortById:!0},e.addToPlaylist=function(t,n){t.preventDefault(),e.props.addToPlaylist(n),t.stopPropagation()},e.removeFromPlaylist=function(t,n){t.preventDefault(),e.props.removeFromPlaylist(n),t.stopPropagation()},e.renderSmallButtons=function(t){var n=!e.props.playlist.loaded||e.props.signedIn;if((e.props.playlist.visible||me.isMobileOnly)&&n)return e.props.playlist.songs.includes(t.id)?Object(Oe.jsx)("i",{"data-tip":"Elt\xe1vol\xedt\xe1s a lej\xe1tsz\xe1si list\xe1r\xf3l",className:"icon bigger-icon minus circle red",onClick:function(n){return e.removeFromPlaylist(n,t.id)}}):Object(Oe.jsx)("i",{"data-tip":"Hozz\xe1ad\xe1s a lej\xe1tsz\xe1si list\xe1hoz",className:"icon bigger-icon plus circle green",onClick:function(n){return e.addToPlaylist(n,t.id)}})},e.renderSong=function(t,n){return Object(Oe.jsx)("div",{className:"column pointer hover-grey my-bottom-border ".concat(n%3===0||me.isMobileOnly?"":"left-border"),children:Object(Oe.jsx)(ye.a,{to:"".concat(ae,"/songs/").concat(t.id),className:"notLinkStyle",children:Object(Oe.jsxs)("div",{className:"content right-left",children:[Object(Oe.jsxs)("h3",{className:"header my-header-text",children:[t.id,". ",t.title]}),e.renderSmallButtons(t)]})})},t.id)},e}return Object(pe.a)(n,[{key:"componentDidMount",value:function(){this.props.removeAlert(),this.props.fetchSongs(),this.props.stopPlaylist()}},{key:"componentDidUpdate",value:function(){this.state.loaded||h.a.isEmpty(this.props.songs)||this.setState({loaded:!0})}},{key:"render",value:function(){var e=this;if(h.a.isEmpty(this.props.songs)&&!this.state.loaded)return Object(Oe.jsx)(Se,{});this.state.sortById?q(this.props.songs,"id"):q(this.props.songs,"title");var t=this.props.searchList,n=[],s=0===(n=t.validSearch?t.list.map((function(t,n){return e.renderSong(e.props.songs.find((function(e){return e.id===t})),n)})):this.props.songs.map((function(t,n){return e.renderSong(t,n)}))).length?Object(Oe.jsx)("p",{className:"big-text centered-text",children:"Nincs tal\xe1lat!"}):null;return Object(Oe.jsx)(xe,{path:this.props.location.pathname,children:Object(Oe.jsxs)("div",{className:"ui container",children:[Object(Oe.jsx)(ve,{}),Object(Oe.jsxs)("div",{className:"ui ".concat(me.isMobileOnly?"":"stackable grid"),children:[Object(Oe.jsx)("div",{className:"twelve wide column",children:Object(Oe.jsx)(we,{id:this.props.findId,term:this.props.searchSongs,cancel:this.props.cancelSearch})}),Object(Oe.jsx)("div",{className:"four wide column ",children:Object(Oe.jsxs)("div",{className:"centered-container",children:[Object(Oe.jsx)(Ce,{color:"blue",onClick:function(){return e.setState({sortById:!0})},icons:["sort numeric down"],tip:"\xc9nekek rendez\xe9se sorsz\xe1m szerint",disabled:this.state.sortById||this.props.searchList.validSearch}),Object(Oe.jsx)(Ce,{color:"blue",onClick:function(){return e.setState({sortById:!1})},icons:["sort alphabet down"],tip:"\xc9nekek rendez\xe9se c\xedm szerint",disabled:!this.state.sortById||this.props.searchList.validSearch}),Object(Oe.jsx)(Ce,{color:"green",onClick:this.props.toggleVisibility,icons:["play circle"],text:" Lej\xe1tsz\xe1si lista"})]})})]}),Object(Oe.jsx)("div",{className:"ui stackable three column grid",children:n}),s]})})}}]),n}(a.a.Component),qe=Object(c.b)((function(e){return{songs:Object.values(e.songs),searchList:e.searchList,playlist:e.playlist,signedIn:e.auth.signedIn}}),{fetchSongs:Ve,removeAlert:Je,searchSongs:function(e,t){return function(){var n=Object(Le.a)(Ae.a.mark((function n(s){var a,r;return Ae.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Pe.get("/search-title/".concat(e,"/"));case 3:if(a=n.sent,!t){n.next=11;break}return n.next=7,Pe.get("/search-lyrics/".concat(e,"/"));case 7:r=n.sent,s({type:g,payload:[].concat(Object(J.a)(a.data),Object(J.a)(r.data))}),n.next=12;break;case 11:s({type:g,payload:a.data});case 12:n.next=17;break;case 14:n.prev=14,n.t0=n.catch(0),X(n.t0,s);case 17:case"end":return n.stop()}}),n,null,[[0,14]])})));return function(e){return n.apply(this,arguments)}}()},findId:function(e){return function(){var t=Object(Le.a)(Ae.a.mark((function t(n){var s;return Ae.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Pe.get("/songs/".concat(e,"/?format=json"));case 3:s=t.sent,n({type:y,payload:s.data}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),t.t0.response&&404===t.t0.response.status?n({type:m}):X(t.t0,n);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},addToPlaylist:Be,removeFromPlaylist:Fe,playlistNext:Re,stopPlaylist:Ye,cancelSearch:function(){return{type:O}},toggleVisibility:Ke})(Xe),Qe=n(403),Ze=n(401),$e=n(399),et=n(400),tt=n(402),nt=Object(c.b)((function(e){return{alert:e.alert,modal:e.modal}}),{removeAlert:Je,openModal:function(e){return{type:G,payload:e}},closeModal:function(){return{type:K}}})((function(e){var t=e.alert.msg?Object(Oe.jsx)($e.a,{onClose:function(){e.removeAlert()},severity:e.alert.type,children:e.alert.msg}):null;return Object(Oe.jsxs)(et.a,{onClose:e.closeModal,onOpen:function(){return e.openModal(e.id)},open:e.modal.open&&e.modal.id===e.id,trigger:e.generateTrigger(),children:[Object(Oe.jsx)(et.a.Header,{children:e.header}),Object(Oe.jsx)(et.a.Content,{children:Object(Oe.jsx)(et.a.Description,{children:e.children})}),Object(Oe.jsxs)(et.a.Actions,{children:[Object(Oe.jsx)("div",{className:"centered",children:t}),Object(Oe.jsx)(tt.a,{onClick:e.closeModal,children:e.closeText}),Object(Oe.jsx)(tt.a,{content:e.approveText,onClick:function(){e.onApprove()},negative:e.negative,primary:e.primary})]})]})})),st=function(e){var t=e.input,n=e.label,s=e.meta,a=e.type,r=e.disabled,i=e.wide,c=e.tip;return Object(Oe.jsxs)("div",{className:"".concat(i," field ").concat(s.error&&s.touched?"error":""),children:[Object(Oe.jsx)("label",{children:n}),Object(Oe.jsx)("input",Object(j.a)(Object(j.a)({},t),{},{type:a,autoComplete:"off",disabled:r,"data-tip":c})),rt(s)]})},at=function(e){var t=e.input,n=e.label,s=e.meta,a=e.tip;return Object(Oe.jsxs)("div",{className:"field ".concat(s.error&&s.touched?"error":""),children:[Object(Oe.jsx)("label",{children:n}),Object(Oe.jsx)("textarea",Object(j.a)(Object(j.a)({},t),{},{autoComplete:"off","data-tip":a})),rt(s)]})},rt=function(e){var t=e.error;if(e.touched&&t)return Object(Oe.jsx)("div",{className:"ui error message",children:Object(Oe.jsx)("div",{className:"header",children:t})})},it=Object(Ze.a)({form:"songForm",validate:function(e){var t={};return e.id||(t.id="Add meg az \xe9nek sorsz\xe1m\xe1t!"),e.title||(t.title="Add meg az \xe9nek c\xedm\xe9t!"),e.lyrics||(t.lyrics="Add meg a dalsz\xf6veget!"),t}})((function(e){return Object(Oe.jsxs)(Oe.Fragment,{children:[Object(Oe.jsxs)("form",{className:"ui form error",onSubmit:e.handleSubmit((function(t){e.onSubmit(t)})),children:[Object(Oe.jsx)(ve,{}),Object(Oe.jsxs)("div",{className:"fields",children:[Object(Oe.jsx)(Qe.a,{wide:"three wide",tip:"Az \xe9nek sorsz\xe1ma. Egyedi, k\xe9s\u0151bb nem v\xe1ltoztathat\xf3",name:"id",component:st,label:"Sorsz\xe1m",type:"number",props:{disabled:e.edit}}),Object(Oe.jsx)(Qe.a,{wide:"thirteen wide",name:"title",component:st,label:"C\xedm",type:"text"})]}),Object(Oe.jsx)(Qe.a,{tip:"Az alkalmaz\xe1s dupla sork\xf6z\xf6kn\xe9l bontja versszakokra a sz\xf6veget.",name:"lyrics",component:at,label:"Dalsz\xf6veg"}),e.edit?Object(Oe.jsxs)("div",{className:"ui segment",children:[Object(Oe.jsxs)("div",{className:"ui two column very relaxed grid",children:[Object(Oe.jsxs)("div",{className:"column",children:[Object(Oe.jsx)("button",{className:"ui button primary ".concat(me.isMobileOnly?"my-bigger-button":""),children:"Ment\xe9s"}),Object(Oe.jsx)(ye.a,{to:"".concat(ae,"/songs/").concat(e.id),className:"ui button grey ".concat(me.isMobileOnly?"my-bigger-button":""),children:"M\xe9gse"})]}),Object(Oe.jsx)("div",{className:"column jobbra",children:Object(Oe.jsx)(nt,{header:"Biztosan t\xf6rl\xf6d ezt az \xe9neket?",generateTrigger:function(){return Object(Oe.jsx)("button",{type:"button",className:"ui button negative ".concat(me.isMobileOnly?"my-bigger-button":""),children:"\xc9nek t\xf6rl\xe9se"})},closeText:"M\xe9gse",approveText:"T\xf6rl\xe9s",onApprove:e.onDeleteClick,negative:!0,id:3,children:"Biztosan t\xf6rl\xf6d a(z) ".concat(e.initialValues.title," \xe9neket? Ezt k\xe9s\u0151bb nem tudod visszavonni!")})})]}),Object(Oe.jsx)("div",{className:"ui vertical divider",children:"vagy"})]}):Object(Oe.jsx)("button",{className:"ui button primary",children:"Ment\xe9s"})]}),e.children]})})),ct=function(e){Object(je.a)(n,e);var t=Object(be.a)(n);function n(){return Object(ue.a)(this,n),t.apply(this,arguments)}return Object(pe.a)(n,[{key:"componentDidMount",value:function(){this.props.fetchSongs(),this.props.stopPlaylist(),this.props.plVisible&&this.props.toggleVisibility()}},{key:"render",value:function(){return this.props.biggestID>0?Object(Oe.jsxs)("div",{className:"ui container",children:[Object(Oe.jsx)("h2",{className:"ui header",children:"\xdaj \xe9nek felv\xe9tele"}),Object(Oe.jsx)(it,{onSubmit:this.props.createSong,initialValues:{id:this.props.biggestID+1}})]}):Object(Oe.jsx)(Se,{})}}]),n}(a.a.Component),ot=Object(c.b)((function(e){return{plVisible:e.playlist.visible,biggestID:Math.max.apply(Math,Object(J.a)(Object.values(e.songs).map((function(e){return e.id}))))}}),{createSong:function(e){return function(){var t=Object(Le.a)(Ae.a.mark((function t(n,s){var a;return Ae.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Pe.post("/songs/",{id:parseInt(e.id),title:e.title,lyrics:e.lyrics.split("\n\n").join("###")},{headers:{Authorization:"Token ".concat(s().auth.token)}});case 3:a=t.sent,n({type:x,payload:a.data}),Ee.push("".concat(ae,"/songs/").concat(e.id)),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0.response),X(t.t0,n);case 12:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e,n){return t.apply(this,arguments)}}()},stopPlaylist:Ye,toggleVisibility:Ke,fetchSongs:Ve})(ct),lt=function(e){Object(je.a)(n,e);var t=Object(be.a)(n);function n(){return Object(ue.a)(this,n),t.apply(this,arguments)}return Object(pe.a)(n,[{key:"componentDidMount",value:function(){this.props.fetchSong(this.props.match.params.id),this.props.stopPlaylist(),this.props.plVisible&&this.props.toggleVisibility()}},{key:"render",value:function(){var e=this;if(!this.props.song)return Object(Oe.jsx)(Se,{});var t=this.props.song;return Object(Oe.jsxs)("div",{className:"ui container",children:[Object(Oe.jsx)("h2",{className:"ui header",children:"\xc9nek szerkeszt\xe9se"}),Object(Oe.jsx)(it,{onSubmit:function(t){return e.props.editSong(e.props.match.params.id,t)},initialValues:{id:t.id,title:t.title,lyrics:t.verses.join("\n\n")},edit:!0,id:t.id,onDeleteClick:function(){return e.props.deleteSong(parseInt(e.props.match.params.id))}})]})}}]),n}(a.a.Component),dt=Object(c.b)((function(e,t){return{song:e.songs[t.match.params.id],plVisible:e.playlist.visible}}),{editSong:function(e,t){return function(){var n=Object(Le.a)(Ae.a.mark((function n(s,a){var r;return Ae.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Pe.patch("/songs/".concat(e,"/"),{title:t.title,lyrics:t.lyrics.split("\n\n").join("###")},{headers:{Authorization:"Token ".concat(a().auth.token)}});case 3:r=n.sent,s({type:k,payload:r.data}),Ee.push("".concat(ae,"/songs/").concat(e)),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),X(n.t0,s);case 11:case"end":return n.stop()}}),n,null,[[0,8]])})));return function(e,t){return n.apply(this,arguments)}}()},fetchSong:_e,stopPlaylist:Ye,toggleVisibility:Ke,deleteSong:function(e){return function(){var t=Object(Le.a)(Ae.a.mark((function t(n,s){return Ae.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Pe.delete("/songs/".concat(e,"/"),{headers:{Authorization:"Token ".concat(s().auth.token)}});case 3:s().playlist.songs.includes(e)&&n({type:C,payload:e}),n({type:N,payload:e}),n({type:K}),Ee.push(ae),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),X(t.t0,n);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e,n){return t.apply(this,arguments)}}()}})(lt),ut=18,pt=function(e){Object(je.a)(n,e);var t=Object(be.a)(n);function n(){var e;Object(ue.a)(this,n);for(var s=arguments.length,r=new Array(s),i=0;i<s;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={fontSize:ut,deleteModalActive:!1,deletePassword:"",oneVerseModeActive:!1,currentVerse:0,showButtons:!me.isMobileOnly,twoColumnMode:!1},e.handleKeyDown=function(t){switch(t.code){case"ArrowRight":e.handleVerseChange(!0);break;case"ArrowLeft":e.handleVerseChange(!1)}},e.onSizeChange=function(t){t&&e.state.fontSize<70?e.setState({fontSize:e.state.fontSize+3}):!t&&e.state.fontSize>8&&e.setState({fontSize:e.state.fontSize-3})},e.handleModeSwitch=function(){e.state.oneVerseModeActive?e.setState({oneVerseModeActive:!1,fontSize:ut}):e.setState({oneVerseModeActive:!0,fontSize:60})},e.handleVerseChange=function(t){t?e.setState({currentVerse:(e.state.currentVerse+1)%e.props.song.verses.length}):0===e.state.currentVerse?e.setState({currentVerse:e.props.song.verses.length-1}):e.setState({currentVerse:(e.state.currentVerse-1)%e.props.song.verses.length})},e.handleFontSizeReset=function(){e.state.oneVerseModeActive?e.setState({fontSize:60}):e.setState({fontSize:ut})},e.onPlaylistAdd=function(){e.props.addToPlaylist(parseInt(e.props.match.params.id)),e.props.plVisible||e.props.toggleVisibility()},e.renderLine=function(e,t){return Object(Oe.jsxs)(a.a.Fragment,{children:[e,Object(Oe.jsx)("br",{})]},t)},e.renderVerse=function(t,n){var s=t.split("\n").map((function(t,n){return e.renderLine(t,n)}));return Object(Oe.jsx)("p",{style:{fontSize:"".concat(e.state.fontSize,"px")},children:s},n)},e.renderVerses=function(){if(!e.state.oneVerseModeActive){if(e.state.twoColumnMode){var t=e.props.song.verses.map((function(t,n){return n+1<=Math.ceil(e.props.song.verses.length/2)?e.renderVerse(t,n):null})),n=e.props.song.verses.map((function(t,n){return n+1>Math.ceil(e.props.song.verses.length/2)?e.renderVerse(t,n):null}));return Object(Oe.jsxs)("div",{className:"ui container grid",children:[Object(Oe.jsx)("div",{className:"eight wide column",children:t}),Object(Oe.jsx)("div",{className:"eight wide column",children:n})]})}return Object(Oe.jsxs)("div",{className:"ui container",children:[" ",e.props.song.verses.map((function(t,n){return e.renderVerse(t,n)}))]})}if(!e.props.song.verses[e.state.currentVerse])return Object(Oe.jsx)(Se,{});var s=e.props.song.verses[e.state.currentVerse].split("\n").map((function(t,n){return e.renderLine(t,n)}));return Object(Oe.jsx)("div",{children:Object(Oe.jsx)("p",{style:{fontSize:"".concat(e.state.fontSize,"px")},children:s})})},e.renderButtons=function(){var t=e.props.signedIn?Object(Oe.jsx)(ye.a,{"data-tip":"\xc9nek szerkezt\xe9se vagy t\xf6rl\xe9se",className:"ui button my-button icon yellow",to:"".concat(ae,"/songs/edit/").concat(e.props.match.params.id),children:Object(Oe.jsx)("i",{className:"icon edit"})}):null,n=!me.isMobileOnly&&e.state.showButtons?Object(Oe.jsxs)(Oe.Fragment,{children:[Object(Oe.jsx)(Ce,{tip:"El\u0151z\u0151 versszak",disabled:!e.state.oneVerseModeActive,color:"teal",onClick:function(){return e.handleVerseChange(!1)},icons:[" step backward icon"]}),Object(Oe.jsx)(Ce,{tip:"Egyversszak m\xf3d be- \xe9s kikapcsol\xe1sa",color:"green",onClick:e.handleModeSwitch,icons:["play"]}),Object(Oe.jsx)(Ce,{tip:"K\xf6vetkez\u0151 vesszak",disabled:!e.state.oneVerseModeActive,color:"teal",onClick:function(){return e.handleVerseChange(!0)},icons:[" step forward icon"]})]}):null,s=e.state.showButtons?Object(Oe.jsxs)(Oe.Fragment,{children:[Object(Oe.jsx)(ye.a,{"data-tip":"Vissza a keres\xe9shez",className:"ui button my-button icon grey",to:ae,children:Object(Oe.jsx)("i",{className:"icon search"})}),t,Object(Oe.jsx)(Ce,{tip:"".concat(e.state.twoColumnMode?"Egy":"K\xe9t"," has\xe1b"),color:"primary",onClick:function(){return e.setState({twoColumnMode:!e.state.twoColumnMode})},disabled:e.state.oneVerseModeActive,icons:["".concat(e.state.twoColumnMode?"align justify":"columns")]}),Object(Oe.jsx)(Ce,{tip:"Bet\u0171m\xe9ret cs\xf6kkent\xe9se",color:"primary",onClick:function(){return e.onSizeChange(!1)},icons:["font","arrow down"]}),Object(Oe.jsx)(Ce,{tip:"Bet\u0171m\xe9ret n\xf6vel\xe9se",color:"primary",onClick:function(){return e.onSizeChange(!0)},icons:["font","arrow up "]}),Object(Oe.jsx)(Ce,{tip:"Bet\u0171m\xe9ret vissza\xe1ll\xedt\xe1sa",color:"primary",onClick:e.handleFontSizeReset,icons:["font","undo"]}),Object(Oe.jsx)(Ce,{tip:"Hozz\xe1ad\xe1s a lej\xe1tsz\xe1si list\xe1hoz",color:"green",onClick:e.onPlaylistAdd,icons:["plus"]}),Object(Oe.jsx)(Ce,{color:"green",onClick:e.props.toggleVisibility,icons:["play circle"],text:" Lej\xe1tsz\xe1si lista"})]}):null;return Object(Oe.jsxs)(Oe.Fragment,{children:[s,n]})},e.renderTitle=function(){return me.isMobileOnly?Object(Oe.jsxs)(Oe.Fragment,{children:[e.renderButtons(),Object(Oe.jsxs)("div",{className:"right-left",children:[Object(Oe.jsxs)("h2",{className:"vert-centered",children:[e.props.song.id,". ",e.props.song.title," "]}),Object(Oe.jsx)(Ce,{color:"gray",onClick:function(){return e.setState({showButtons:!e.state.showButtons})},icons:["bars"],tip:"Gombok elrejt\xe9se/el\u0151hoz\xe1sa"})]}),Object(Oe.jsx)("div",{className:"ui divider"})]}):Object(Oe.jsxs)(Oe.Fragment,{children:[Object(Oe.jsxs)("div",{className:"right-left m-top",children:[Object(Oe.jsxs)("h2",{className:"vert-centered",children:[e.props.song.id,". ",e.props.song.title," "]}),Object(Oe.jsx)("h2",{className:"vert-centered",children:e.state.oneVerseModeActive?"".concat(e.state.currentVerse+1,"/").concat(e.props.song.verses.length):""}),Object(Oe.jsxs)("div",{children:[Object(Oe.jsx)(Ce,{color:"gray",onClick:function(){return e.setState({showButtons:!e.state.showButtons})},icons:["bars"],tip:"Gombok elrejt\xe9se/el\u0151hoz\xe1sa"}),e.renderButtons()]})]}),Object(Oe.jsx)("div",{className:"ui divider"})]})},e}return Object(pe.a)(n,[{key:"componentDidMount",value:function(){this.props.removeAlert(),this.props.fetchSong(this.props.match.params.id)}},{key:"componentDidUpdate",value:function(e){e.song&&e.song.id!==this.props.song.id&&this.setState({currentVerse:0})}},{key:"render",value:function(){return this.props.song?Object(Oe.jsxs)(xe,{path:this.props.location.pathname,children:[Object(Oe.jsx)(ve,{}),Object(Oe.jsx)("div",{className:"ui container",onKeyDown:this.handleKeyDown,children:Object(Oe.jsxs)("div",{className:"full-screen",children:[this.renderTitle(),this.renderVerses()]})})]}):Object(Oe.jsx)(Se,{})}}]),n}(a.a.Component),jt=Object(c.b)((function(e,t){return{song:e.songs[t.match.params.id],plVisible:e.playlist.visible,signedIn:e.auth.signedIn}}),{fetchSong:_e,removeAlert:Je,addToPlaylist:Be,toggleVisibility:Ke})(pt),bt=function(){return(new fe.a).remove("token",{path:ae,maxAge:32140800}),{type:U}},ht=function(e){var t=e.input,n=e.label,s=e.meta,a=e.type;return Object(Oe.jsxs)("div",{className:"field ".concat(s.error&&s.touched?"error":""),children:[Object(Oe.jsx)("label",{children:n}),Object(Oe.jsx)("input",Object(j.a)(Object(j.a)({},t),{},{type:a,autoComplete:"off"})),ft(s)]})},ft=function(e){var t=e.error;if(e.touched&&t)return Object(Oe.jsx)("div",{className:"ui error message",children:Object(Oe.jsx)("div",{className:"header",children:t})})},mt=Object(Ze.a)({form:"authForm",validate:function(e){var t={};return e.username||(t.username="Add meg a felhaszn\xe1l\xf3nevet!"),e.password||(t.password="Add meg a jelsz\xf3t!"),t}})(Object(c.b)(null,{login:function(e){var t=e.username,n=e.password;return function(){var e=Object(Le.a)(Ae.a.mark((function e(s){var a;return Ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Pe.post("/api-token-auth/",{username:t,password:n});case 3:a=e.sent,s({type:H,payload:a.data.token}),(new fe.a).set("token",a.data.token,{path:ae,maxAge:32140800}),Ee.goBack(),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),X(e.t0,s);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}()}})((function(e){return Object(Oe.jsx)("div",{className:"ui container",children:Object(Oe.jsxs)("form",{className:"ui form error",onSubmit:e.handleSubmit((function(t){e.login(t)})),children:[Object(Oe.jsx)(Qe.a,{name:"username",component:ht,label:"Felhaszn\xe1l\xf3n\xe9v",type:"text"}),Object(Oe.jsx)(Qe.a,{name:"password",component:ht,label:"Jelsz\xf3",type:"password"}),Object(Oe.jsx)("button",{className:"ui button primary",children:"Bejelentkez\xe9s"})]})})}))),yt=n(404),gt=n(95),Ot=Object(c.b)(null,{moveInPlaylist:He,removeFromPlaylist:Fe,playlistStep:function(e){return{type:A,payload:e}}})((function(e){var t=0===e.idx,n=e.idx===e.length-1;return Object(Oe.jsx)("div",{className:"item my-item ".concat(e.currentIndex===e.idx?"activeInPlaylist":""),children:Object(Oe.jsxs)("h5",{className:"header",children:[!e.unmodifiable&&Object(Oe.jsxs)(Oe.Fragment,{children:[Object(Oe.jsx)("i",{className:"".concat(t?"grey":"pointer"," icon caret up bigger-icon"),onClick:function(){return e.moveInPlaylist(e.idx,!0,e.playlistId)}}),Object(Oe.jsx)("i",{className:"".concat(n?"grey":"pointer"," icon caret down bigger-icon"),onClick:function(){return e.moveInPlaylist(e.idx,!1,e.playlistId)}})]}),Object(Oe.jsxs)(ye.a,{to:"".concat(ae,"/songs/").concat(e.song.id),onClick:function(){e.playlist&&e.playlistStep(e.idx)},className:"notLinkStyle pointer",children:[e.song.id,". ",e.song.title]}),!e.unmodifiable&&Object(Oe.jsx)("div",{className:"right floated",children:Object(Oe.jsx)("i",{className:"icon minus circle red pointer",onClick:function(){return e.removeFromPlaylist(e.song.id,e.playlistId)}})})]})})})),vt=function(e){Object(je.a)(n,e);var t=Object(be.a)(n);function n(){var e;Object(ue.a)(this,n);for(var s=arguments.length,a=new Array(s),r=0;r<s;r++)a[r]=arguments[r];return(e=t.call.apply(t,[this].concat(a))).state={activePlaylist:-1},e}return Object(pe.a)(n,[{key:"componentDidMount",value:function(){this.props.fetchSongs(),this.props.fetchPlaylists()}},{key:"handleClick",value:function(e){this.setState({activePlaylist:this.state.activePlaylist===e?-1:e})}},{key:"copyLink",value:function(e){navigator.clipboard.writeText("".concat(re,"/playlists/").concat(e)),this.props.newAlert("A lej\xe1tsz\xe1si lista linkje a v\xe1g\xf3lapra m\xe1solva","success")}},{key:"generateDateAdded",value:function(e){return Object(Oe.jsxs)("p",{children:["L\xe9trehozva: ",new Date(Date.parse(e)).toLocaleDateString("hu-HU")]})}},{key:"render",value:function(){var e=this;return this.props.playlistList.loaded?Object(Oe.jsx)(xe,{path:this.props.location.pathname,children:Object(Oe.jsxs)("div",{className:"ui container",children:[Object(Oe.jsx)(ve,{}),Object(Oe.jsx)("h2",{children:"Lej\xe1tsz\xe1si list\xe1k"}),this.props.playlistList.list&&this.props.playlistList.list.length>0&&!h.a.isEmpty(this.props.songs)?Object(Oe.jsx)(yt.a,{fluid:!0,styled:!0,children:this.props.playlistList.list.map((function(t){return Object(Oe.jsxs)("div",{children:[Object(Oe.jsx)(yt.a.Title,{active:e.state.activePlaylist===t.id,onClick:function(){return e.handleClick(t.id)},children:Object(Oe.jsxs)("div",{className:"right-left",children:[Object(Oe.jsxs)("h3",{children:[Object(Oe.jsx)(gt.a,{name:"dropdown"}),t.name]}),!me.isMobileOnly&&e.generateDateAdded(t.created_at)]})}),Object(Oe.jsxs)(yt.a.Content,{active:e.state.activePlaylist===t.id,children:[me.isMobileOnly&&e.generateDateAdded(t.created_at),Object(Oe.jsx)(Ce,{tip:"Bet\xf6lt\xe9s",color:"green",onClick:function(){return e.props.loadPlaylist(t.id,!0)},icons:["play circle"]}),Object(Oe.jsx)(Ce,{tip:"Megoszt\xe1s",color:"purple",onClick:function(){return e.copyLink(t.id)},icons:["share alternate"]}),Object(Oe.jsx)(Ce,{tip:"Duplik\xe1l\xe1s",color:"blue",onClick:function(){return e.props.loadPlaylist(t.id,!1)},icons:["copy"]}),e.props.signedIn&&Object(Oe.jsx)(nt,{header:"Biztosan t\xf6rl\xf6d a lej\xe1tsz\xe1si list\xe1t?",generateTrigger:function(){return Object(Oe.jsx)(Ce,{tip:"T\xf6rl\xe9s",color:"red",icons:["trash alternate"]})},closeText:"M\xe9gse",approveText:"T\xf6rl\xe9s",onApprove:function(){return e.props.clearPlaylist(t.id)},negative:!0,id:t.id,children:"Biztosan t\xf6rl\xf6d a lej\xe1tsz\xe1si list\xe1t az adatb\xe1zisb\xf3l? Ezt k\xe9s\u0151bb nem tudod visszavonni!"}),Object(Oe.jsx)("div",{className:"ui relaxed divided ordered list",children:t.songs.length>0?t.songs.map((function(n,s){return Object(Oe.jsx)(Ot,{song:e.props.songs[n],idx:s,length:t.songs.length,unmodifiable:!e.props.signedIn,playlistId:t.id},s)})):Object(Oe.jsx)("p",{className:"centered-text",children:"A lej\xe1tsz\xe1si lista \xfcres"})})]})]},t.id)}))}):Object(Oe.jsx)("p",{className:"big-text centered-text",children:"Nincs tal\xe1lat!"})]})}):Object(Oe.jsx)(Se,{})}}]),n}(a.a.Component),xt=Object(c.b)((function(e){return{songs:e.songs,playlistList:e.playlistList,signedIn:e.auth.signedIn}}),{fetchPlaylists:function(){return function(){var e=Object(Le.a)(Ae.a.mark((function e(t){var n;return Ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Pe.get("/playlists/?format=json");case 3:n=e.sent,t({type:_,payload:n.data.map((function(e){return Object(j.a)(Object(j.a)({},e),{},{songs:se(e.songs)})}))}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),X(e.t0,t);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},fetchSongs:Ve,loadPlaylist:Ue,newAlert:We,clearPlaylist:Ge})(vt),kt=Object(c.b)((function(e){return{signedIn:e.auth.signedIn}}),{logout:bt})((function(e){var t=e.signedIn?Object(Oe.jsx)("a",{className:"header-link pointer",onClick:function(){return e.logout()},children:"Kijelentkez\xe9s"}):Object(Oe.jsx)(ye.a,{to:"".concat(ae,"/login"),className:"header-link centered-text",children:"Admin bejelentkez\xe9s"});return Object(Oe.jsxs)("div",{className:"footer-container centered-container two-column small-text",children:[Object(Oe.jsxs)("p",{className:"centered-text",children:["K\xe9sz\xedtette: Fekete S\xe1muel\xa0",Object(Oe.jsx)("a",{target:"_blank",rel:"noreferrer",href:"https://github.com/Tschonti/dicsi-frontend",children:Object(Oe.jsx)("i",{"aria-label":"Forr\xe1sk\xf3d a Github-on",className:"icon github"})}),Object(Oe.jsx)("br",{}),"\xa0az\xa0",Object(Oe.jsx)("a",{target:"_blank",rel:"noreferrer",href:"https://okgy.hu/",children:"\xd6r\xf6mh\xedr Kereszt\xe9ny Gy\xfclekezet"})," sz\xe1m\xe1ra"]}),t]})})),Nt=Object(c.b)((function(e){return{alert:e.alert,signedIn:e.auth.signedIn}}),{removeAlert:Je,logout:bt})((function(e){var t=Object(s.useState)(!1),n=Object(ze.a)(t,2),a=n[0],r=n[1],i=e.alert.msg?Object(Oe.jsx)($e.a,{onClose:function(){e.removeAlert()},severity:e.alert.type,children:e.alert.msg}):null,c=e.signedIn?Object(Oe.jsx)("p",{className:"item header-link",onClick:function(){e.logout(),r(!a)},children:"Kijelentkez\xe9s"}):Object(Oe.jsx)(ye.a,{to:"".concat(ae,"/login"),className:"item header-link",onClick:function(){return r(!a)},children:"Admin bejelentkez\xe9s"}),o=e.signedIn?Object(Oe.jsx)(ye.a,{to:"".concat(ae,"/songs/new"),className:"item header-link",onClick:function(){return r(!1)},children:"\xdaj \xe9nek"}):null;return me.isMobileOnly?Object(Oe.jsxs)("div",{className:"ui secondary vertical menu my-mobile-header",children:[Object(Oe.jsxs)("div",{className:"right-left",children:[Object(Oe.jsx)(ye.a,{to:"".concat(ae),className:"item",onClick:function(){return r(!1)},children:Object(Oe.jsx)("h2",{children:"\xd6KGY \xc9nekesk\xf6nyv"})}),Object(Oe.jsx)("div",{className:"vert-centered",children:Object(Oe.jsx)("i",{className:"icon bars",onClick:function(){return r(!a)}})})]}),a&&Object(Oe.jsxs)("div",{children:[Object(Oe.jsx)(ye.a,{to:"".concat(ae),className:"item header-link",onClick:function(){return r(!1)},children:"\xc9nekek list\xe1ja"}),o,Object(Oe.jsx)(ye.a,{to:"".concat(ae,"/playlists"),className:"item header-link",onClick:function(){return r(!1)},children:"Lej\xe1tsz\xe1si list\xe1k"}),c]}),Object(Oe.jsx)("div",{className:"centered",children:i})]}):Object(Oe.jsxs)("div",{className:"ui secondary pointing menu my-header",children:[Object(Oe.jsx)(ye.a,{to:"".concat(ae),className:"item ",children:Object(Oe.jsx)("h2",{children:"\xd6KGY \xc9nekesk\xf6nyv"})}),Object(Oe.jsx)(ye.a,{to:"".concat(ae),className:"item header-link",children:"\xc9nekek list\xe1ja"}),o,Object(Oe.jsx)(ye.a,{to:"".concat(ae,"/playlists"),className:"item header-link",children:"Lej\xe1tsz\xe1si list\xe1k"}),Object(Oe.jsx)("div",{className:"centered",children:i})]})})),St=function(e){var t=e.input,n=e.label,s=e.meta,a=e.type;return Object(Oe.jsxs)("div",{className:"".concat(s.error&&s.touched?"error":""),children:[Object(Oe.jsx)("label",{children:n}),Object(Oe.jsx)("input",Object(j.a)(Object(j.a)({},t),{},{type:a,autoComplete:"off"})),zt(s)]})},zt=function(e){var t=e.error;if(e.touched&&t)return Object(Oe.jsx)("div",{className:"ui error message",children:Object(Oe.jsx)("div",{className:"header",children:t})})},wt=Object(Ze.a)({form:"playlistForm",validate:function(e){var t={};return e.name||(t.name="Add meg a lej\xe1tsz\xe1si lista nev\xe9t!"),t}})((function(e){var t=function(t){e.onSubmit(t)};return Object(Oe.jsx)(nt,{header:"Lej\xe1tsz\xe1si lista ment\xe9se",generateTrigger:function(){return Object(Oe.jsx)(Ce,{disabled:e.disabled,tip:"Lej\xe1tsz\xe1si lista ment\xe9se",color:"purple",icons:["save"]})},closeText:"M\xe9gse",approveText:"Ment\xe9s",onApprove:e.handleSubmit(t),primary:!0,id:2,children:Object(Oe.jsx)("form",{className:"ui form error",onSubmit:e.handleSubmit(t),children:Object(Oe.jsx)(Qe.a,{label:"Lej\xe1tsz\xe1si lista neve",name:"name",type:"text",component:St})})})})),Ct=function(e){Object(je.a)(n,e);var t=Object(be.a)(n);function n(){var e;Object(ue.a)(this,n);for(var s=arguments.length,a=new Array(s),r=0;r<s;r++)a[r]=arguments[r];return(e=t.call.apply(t,[this].concat(a))).state={open:!0},e.renderSongList=function(t){if(h.a.isEmpty(e.props.songs)||!e.state.open||!e.props.playlist.songs)return null;var n=e.props.playlist.songs.map((function(n,s){var a=e.props.songs.find((function(e){return e.id===n}));return a&&Object(Oe.jsx)(Ot,{song:a,idx:s,length:e.props.playlist.songs.length,currentIndex:e.props.playlist.currentIndex,unmodifiable:!t,playlist:!0,playlistId:e.props.playlist.loaded},s)})),s=n.length>0?"":Object(Oe.jsx)("p",{className:"centered-text",children:"A lej\xe1tsz\xe1si lista \xfcres"});return Object(Oe.jsxs)(Oe.Fragment,{children:[Object(Oe.jsx)("div",{className:"ui relaxed divided ordered list",children:n}),s]})},e.onClose=function(t){e.props.toggleVisibility(),t.stopPropagation()},e}return Object(pe.a)(n,[{key:"componentDidMount",value:function(){this.props.fetchSongs()}},{key:"copyLink",value:function(e){navigator.clipboard.writeText("".concat(re,"/playlists/").concat(e)),this.props.newAlert("A lej\xe1tsz\xe1si lista linkje a v\xe1g\xf3lapra m\xe1solva","success")}},{key:"render",value:function(){var e=this;if(!this.props.playlist.visible||!this.props.playlist.songs)return null;var t=0===this.props.playlist.songs.length?0:this.props.playlist.currentIndex+1,n=this.state.open?Object(Oe.jsxs)("div",{className:"right-left pointer",onClick:function(){return e.setState({open:!e.state.open})},children:[Object(Oe.jsx)("i",{className:"icon ".concat(this.state.open?"minus":"plus")}),Object(Oe.jsx)("i",{className:"red icon close",onClick:this.onClose})]}):null,s=!this.props.playlist.loaded||this.props.signedIn;return Object(Oe.jsx)(Oe.Fragment,{children:Object(Oe.jsxs)("div",{className:"playlist-container",children:[Object(Oe.jsx)(ve,{}),Object(Oe.jsxs)("div",{className:"right-left pointer",onClick:function(){return e.setState({open:!e.state.open})},children:[Object(Oe.jsxs)("h3",{children:[this.props.playlist.loaded?this.props.playlist.loadedName:"Lej\xe1tsz\xe1si lista"," ","".concat(t,"/").concat(this.props.playlist.songs.length)]}),Object(Oe.jsxs)("div",{children:[Object(Oe.jsx)("i",{className:"icon ".concat(this.state.open?"minus":"plus")}),"\xa0\xa0",Object(Oe.jsx)("i",{className:"red icon close",onClick:this.onClose})]})]}),Object(Oe.jsxs)("div",{className:"centered-container",children:[this.props.signedIn&&!this.props.playlist.loaded&&Object(Oe.jsx)(wt,{onSubmit:function(t){return e.props.savePlaylist(t)},disabled:0===this.props.playlist.songs.length}),this.props.playlist.loaded?Object(Oe.jsxs)(Oe.Fragment,{children:[Object(Oe.jsx)(Ce,{tip:"\xdcres list\xe1ra v\xe1lt\xe1s",color:"orange",onClick:this.props.unloadPlaylist,icons:["file outline"]}),Object(Oe.jsx)(Ce,{tip:"Megoszt\xe1s",color:"purple",onClick:function(){return e.copyLink(e.props.playlist.loaded)},icons:["share alternate"]})]}):Object(Oe.jsx)(nt,{header:"Biztosan t\xf6rl\xf6d a lej\xe1tsz\xe1si list\xe1t?",generateTrigger:function(){return Object(Oe.jsx)(Ce,{disabled:0===e.props.playlist.songs.length&&!e.props.playlist.loaded,tip:"Lej\xe1tsz\xe1si lista t\xf6rl\xe9se",color:"negative",icons:["trash alternate"]})},closeText:"M\xe9gse",approveText:"T\xf6rl\xe9s",onApprove:this.props.clearPlaylist,negative:!0,id:1,children:"Biztosan \xfcr\xedted a lej\xe1tsz\xe1si list\xe1t? Ezt k\xe9s\u0151bb nem tudod visszavonni!"}),Object(Oe.jsx)(Ce,{disabled:!this.props.playlist.active,tip:"El\u0151z\u0151 \xe9nek",color:"blue",onClick:function(){return e.props.playlistNext(!1,e.props.playlist)},icons:["backward"]}),Object(Oe.jsx)(Ce,{disabled:this.props.playlist.active||0===this.props.playlist.songs.length,tip:"Lej\xe1tsz\xe1si lista ind\xedt\xe1sa",color:"green",onClick:function(){return e.props.startPlaylist(e.props.playlist)},icons:["play"]}),Object(Oe.jsx)(Ce,{disabled:!this.props.playlist.active,tip:"K\xf6vetkez\u0151 \xe9nek",color:"blue",onClick:function(){return e.props.playlistNext(!0,e.props.playlist)},icons:["forward"]})]}),this.renderSongList(s),n]})})}}]),n}(a.a.Component),It=Object(c.b)((function(e){return{songs:Object.values(e.songs),playlist:e.playlist,signedIn:e.auth.signedIn}}),{fetchSongs:Ve,playlistNext:Re,startPlaylist:function(e){return Ee.push("".concat(ae,"/songs/").concat(e.songs[e.currentIndex])),{type:L}},clearPlaylist:Ge,removeFromPlaylist:Fe,toggleVisibility:Ke,moveInPlaylist:He,savePlaylist:function(e){return function(){var t=Object(Le.a)(Ae.a.mark((function t(n,s){var a;return Ae.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Pe.post("/playlists/",{name:e.name,songs:ne(s().playlist.songs)},{headers:{Authorization:"Token ".concat(s().auth.token)}});case 3:a=t.sent,n({type:K}),n({type:V,payload:Object(j.a)(Object(j.a)({},a.data),{},{songs:se(a.data.songs)})}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),X(t.t0,n);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e,n){return t.apply(this,arguments)}}()},unloadPlaylist:function(){return{type:B}},newAlert:We})(Ct),At=function(e){Object(je.a)(n,e);var t=Object(be.a)(n);function n(){return Object(ue.a)(this,n),t.apply(this,arguments)}return Object(pe.a)(n,[{key:"componentDidMount",value:function(){var e=(new fe.a).get("token");e&&this.props.loginFromCookie(e),this.props.recoverState()}},{key:"render",value:function(){var e=this;return Object(Oe.jsx)("div",{children:Object(Oe.jsxs)(he.b,{history:Ee,children:[Object(Oe.jsx)(Nt,{}),Object(Oe.jsxs)(he.c,{children:[Object(Oe.jsx)(he.a,{path:"".concat(ae,"/"),exact:!0,component:qe}),Object(Oe.jsx)(he.a,{path:"".concat(ae,"/songs/new"),exact:!0,component:ot}),Object(Oe.jsx)(he.a,{path:"".concat(ae,"/songs/edit/:id"),exact:!0,component:dt}),Object(Oe.jsx)(he.a,{path:"".concat(ae,"/songs/:id"),exact:!0,component:jt}),Object(Oe.jsx)(he.a,{path:"".concat(ae,"/login"),exact:!0,component:mt}),Object(Oe.jsx)(he.a,{path:"".concat(ae,"/playlists"),exact:!0,component:xt}),Object(Oe.jsx)(he.a,{path:"".concat(ae,"/playlists/:id"),exact:!0,render:function(t){var n=t.match;e.props.loadPlaylist(n.params.id,!0),Ee.push(ae)}})]}),Object(Oe.jsx)(kt,{}),Object(Oe.jsx)(It,{})]})})}}]),n}(a.a.Component),Lt=Object(c.b)((function(e){return{signedIn:e.auth.signedIn}}),{loadPlaylist:Ue,recoverState:function(){return{type:W}},loginFromCookie:function(e){return{type:H,payload:e}}})(At),Tt=(window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||o.d)(Object(o.a)(Object(d.save)({states:["playlist"],debounce:500}),l.a))(o.e)(de,Object(d.load)({states:["playlist"]}));i.a.render(Object(Oe.jsx)(c.a,{store:Tt,children:Object(Oe.jsx)(Lt,{})}),document.getElementById("root"))},78:function(e,t,n){}},[[369,1,2]]]);
//# sourceMappingURL=main.9d942325.chunk.js.map